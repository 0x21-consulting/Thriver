/* 
- context.import.less -
Styles associated with the theme shell construct.
Including: Basic relationship of aside and main elements.
*/

//Contextual Elements
@canvas : ~'.canvas';
@canvasPush : ~'.push';
@main : ~'main'; //Canvas Elements in Center
@off : ~'.offCanvas';
@offActive : ~'.canvasActive';
@overlay : ~'.overlay';
@header : ~'.mainHeader';
@utility : ~'.utilityNav';
@mobileNav : ~'.mobileNav';

//Values
@utilityH : 36px;
@headerH: 200px;
@headerFixedH : 50px;
@headerMobileH : 50px;

//Canvas Width Classes Declared Widths (theme.import.less) for sidebar/canvas positions
@length : length(@offCanvasWidths);
.offCanvasWidthInit(@offCanvasWidths; @index) when (@index > 0) {
    .offCanvasWidthInit(@offCanvasWidths; (@index - 1)); // decrement.
    @width : extract(@offCanvasWidths, @index);
    .canvasW@{width} {
        @{off}{ width:~"@{width}px"; }
        &@{offActive}{
            @{canvasPush}, @{header}, @{overlay}{.transform(translate3d(~"@{width}px", 0, 0));}
        }
    }
}
//Initialize Canvas Width Classes
.offCanvasWidthInit(@offCanvasWidths; @length);

//Canvas Specifications
@{canvas}{
    position: relative;
    overflow: hidden;
    @{utility}, @{header}, @{off}{ position: fixed; }
    @{utility}, @{header}, @{overlay} { width: 100%; }
    @{overlay}{ .opacity(1); }
    @{off}{ .visible; }
    @{off},@{overlay}{ height: 100%; }
    @{utility}, @{header}, @{canvasPush}, @{off}, @{overlay}{ top: 0; left: 0; }

    @{utility}{
        z-index: 5;
        height: @utilityH;
    }
    @{header}{
        z-index: 3;
        top: @utilityH;
        height: @headerH;
    }
    @{canvasPush} {
        z-index: 2;
        position: relative;
        margin-top:@utilityH;
        //will-change:initial; //transform value prevents header element from fixing to window
    }
    @{main}{
        position: relative;
        padding-top: @utilityH + @headerH;
        @media @mobile{ padding-top: @headerMobileH; }
    }
    @{off} {
        z-index: 0;
        .hidden;
    }
    @{overlay}{
        z-index: 4;
        position: absolute;
        .opacity(0);
    }
    //Mobile Context
    @{mobileNav}{ 
        display:none; 
        height: @headerMobileH;
    } 
    @media @mobile{
        @{header},@{utility}{ display: none; } //Hide Desktop header elements on mobile
        @{mobileNav}{ display: inherit; } //Show Mobile Header
    }
}

//Active Canvas
@{offActive}{
    overflow: hidden;
    @{overlay}{ .opacity(1); }
    @{off}{ .visible; }
}

//Canvas Animations
@{header}, @{canvasPush}{ .transition(transform,@durationDefault,@easeDefault,0ms); }
@{off}{ .transition2(transform,@durationDefault,@easeDefault,0ms,visibility,0ms,linear,@durationDefault); }
@{overlay}{ .transition2(opacity,300ms,linear,0ms,transform,@durationDefault,@easeDefault,0ms); }
@{offActive}{
    @{off}{ .transition2(opacity,300ms,linear,0ms,transform,@durationDefault,@easeDefault,0ms); }
    @{overlay}{ .transition2(opacity,300ms,linear,0ms,transform,@durationDefault,@easeDefault,0ms); }
}


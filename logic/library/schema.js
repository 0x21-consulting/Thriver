import SimpleSchema from 'simpl-schema';
import { Mongo } from 'meteor/mongo';

/**
 * @summary Resource Center namespace
 * @namespace
 */
const Library = {};

/**
 * @summary Resource Center collection
 * @type {Mongo.Collection}
 */
Library.collection = new Mongo.Collection('library');

/**
 * @summary Library Center Schema
 * @type {SimpleSchema}
 */
Library.schema = new SimpleSchema({
  /** ID */
  _id: {
    type: String,
    optional: true, // ID is autogenerated
  },
  title: { type: String, optional: true },
  description: { type: String, optional: true },
  callNumber: { type: String, optional: true },
  copies: { type: SimpleSchema.Integer, optional: true },
  subjectHeading: { type: String, optional: true },
  classification: {
    type: String,
    optional: true,
    allowedValues: [
      'Resources',
      'Providers',
      'Survivors',
    ],
  },
  material: {
    type: String,
    optional: true,
    allowedValues: [
      'Activities',
      'Books',
      'Curriculum',
      'DVDs',
      'Guide',
      'Handbook',
      'Manual',
      'Report',
      'Study Guide',
      'Textbook',
      'Toolkit',
      'Workbook',
    ],
  },
  status: {
    type: String,
    optional: true,
    allowedValues: ['Available', 'Unavailable'],
  },
  keywords: { type: Array, defaultValue: [] },
  'keywords.$': {
    type: String,
    optional: true,
    allowedValues: [
      'Activism',
      'Advocacy',
      'Based on a True Story',
      'Campus',
      'Child SA',
      'Collected Stories',
      'Counseling',
      'Criminal Justice',
      'Culturally Specific',
      'Disability',
      'Documentary',
      'Evaluation',
      'Fiction',
      'Gender Socialization',
      'Healing',
      'Human Trafficking',
      'Incest',
      'Internet',
      'K-12',
      'Legal',
      'LGBTQ',
      'Medical',
      'Memoirs',
      'Mental Health',
      'Military',
      'Non-profits',
      'Normalization of Violence',
      'Objectification',
      'Offenders',
      'Oppression',
      'Prevention',
      'Prison',
      'Privilege',
      'Self-care',
      'Seniors',
      'Spanish',
      'Spanish with English Subtitles',
      'Substance Abuse',
      'Survivors',
      'Trauma',
      'Treatment',
      'Unhealthy Sexuality',
      'WOC',
    ],
  },
});

// Apply schema to collection
Library.collection.attachSchema(Library.schema);

export default Library;
